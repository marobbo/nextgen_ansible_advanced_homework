---
# Initial, common, system setup steps

- name: enable sudo without tty for some ansible commands
  replace:
    path: /etc/sudoers
    regexp: '^Defaults\s*requiretty'
    replace: 'Defaults  !requiretty'
    backup: yes

- name: Run yum clean
  shell: yum clean all

- name: List repos
  yum:
    list: repos
  register: repo_list

- debug: msg="{{ repo_list }}"

#- name: enable repos
#  template:
#    src: repos_template.j2
#    dest: /etc/yum.repos.d/open_three-tier-app.repo
#    mode: 0644

- name: install base tools and packages
  yum:
    name: ['gcc', 'python-pip']
    disablerepo: "epel"
    state: latest

